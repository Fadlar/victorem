import{r as c,j as m,d as A,y as C}from"./app-wqQKENHS.js";import{A as L}from"./App-txchhPDd.js";import{V as R}from"./index-eZDLojFE.js";import{r as l}from"./drawer-yVSzdWgM.js";import{P as V}from"./page-header-1rXPxyDo.js";import{n as P}from"./notification-wSAlNIor.js";import N from"./edit-product-form-TE1ueJJ3.js";import"./ApplicationLogo-RaZ6QABy.js";import"./index.esm-2Lz0kP3W.js";import"./class-names-zUl3OLOi.js";import"./use-event-listener-LNdhgCfD.js";import"./lang-8hGfRfuX.js";import"./useWindowScroll-B1-7KuBr.js";import"./util-MOdpI_j3.js";import"./dayjs.min-jBeQakmb.js";import"./useMedia-n4SbEzI9.js";import"./index-a5sljUqm.js";/* empty css                      */import"./index-M60amahv.js";import"./transition-bkDs33r5.js";import"./dialog-HRl5WcYL.js";import"./index-MlM2EJpR.js";import"./index-j5Ia7NLu.js";import"./product-summary-T9DgK5SL.js";import"./InputError-_QDKMIdW.js";import"./form-group-O7NQn1rw.js";import"./listbox-kakz3oBQ.js";import"./product-media-DMG3N-Nx.js";import"./FileUpload-Vy7ZVUKs.js";import"./product-image-list-AyFYGLoD.js";import"./utils-kpKCX6Tx.js";import"./objectWithoutPropertiesLoose-0VpOByGv.js";import"./defineProperty-9_qlZ_aL.js";import"./tiny-invariant-Garq8XeN.js";import"./pricing-inventory-mjKfETwX.js";import"./react-number-format.es-OkNTw4KF.js";import"./form-footer-4ZzjKNkl.js";const x={title:"Edit Product",breadcrumb:[{href:"#",name:"Home"},{href:l.eCommerce.products,name:"Products"},{name:"Edit"}]};function be({product:i,categories:w}){const[u,g]=c.useState(i.categories??[]),[e,n]=c.useState({name:i.name??"",description:i.description??"",categories:i.categories??[],price:i.price??0,discount:i.discount??0,discount_percent:i.discount_percent??0,weight:i.weight??0,images:[],sizes:i.sizes??[]}),[b,y]=c.useState(!1),[E,f]=c.useState(!1),[_,h]=c.useState(null),j=t=>{const{name:o,value:r}=t.target;if(o==="discount"){const s=parseFloat(e.price.toString().replace(/\,/g,"")),a=r.toString().replace(/\,/g,"")/s*100;n({...e,discount:r,discount_percent:a})}else if(o==="discount_percent"){const a=parseFloat(e.price.toString().replace(/\,/g,""))*(r/100);n({...e,discount:a,discount_percent:r})}else n({...e,[o]:r})},z=t=>{u.some(r=>r.id===t.id)?k(t.id):g(r=>{const s=r.concat(t);return n({...e,categories:s}),s})},F=t=>{n({...e,description:t})},v=t=>{n({...e,images:t})},I=(t,o)=>{const{name:r,value:s}=t.target;n(a=>{const p=[...a.sizes],S=p.findIndex(d=>d.name===o);S!==-1?p[S][r]=s:p.push({name:o,stock:s});const H=p.filter(d=>d.stock!==null&&d.stock!=="");return{...a,sizes:H}})},k=t=>{g(o=>{const r=o.filter(s=>s.id!==t);return n({...e,categories:r}),r})},D=t=>{t.preventDefault(),C.post(l.eCommerce.updateProduct(i.slug),{_method:"patch",name:e.name,description:e.description,categories:e.categories,price:e.price,discount:e.discount,discount_percent:e.discount_percent,weight:e.weight,images:e.images,sizes:e.sizes},{preserveScroll:!0,onSuccess:()=>{P("Product has been updated.","success"),n({}),h({}),y(!0),C.visit(l.eCommerce.products,{only:["products"]})},onStart:()=>f(!0),onFinish:()=>f(!1),onError:o=>{P("Something went wrong.","error"),h(o)}})};return m.jsxs(L,{title:"Edit Product",children:[m.jsx(V,{title:x.title,breadcrumb:x.breadcrumb,children:m.jsx(A,{href:l.eCommerce.products,className:"mt-4 w-full @lg:mt-0 @lg:w-auto",children:m.jsx(R,{tag:"span",className:"w-full @lg:w-auto",variant:"outline",children:"Cancel"})})}),m.jsx(N,{handleSize:I,handleSubmit:D,data:e,errors:_,isLoading:E,handleChange:j,handleSelect:z,handleDescription:F,isClearFiles:b,product:i,categories:w,selectedCategory:u,handleImages:v})]})}export{be as default};
