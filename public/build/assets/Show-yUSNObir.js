import{W as g,r as v,j as e,y as c}from"./app-nsHntUsK.js";import{A as y}from"./App-rEBeMuYx.js";import{r}from"./drawer-LkzqZ4Wu.js";import{D as C}from"./delete-popover-qMZeHwse.js";import{P as w}from"./page-header-uwg7PbSE.js";import{P as D}from"./print-button-MUPRYg2O.js";import{n as N}from"./notification-3sPEPbd5.js";import{a as S}from"./index.esm-ISvY9W97.js";import{V as l,p as k,E as P,C as _,n as E,a as O}from"./index-iL4kZU-h.js";import A from"./OrderView-NyOYYQD2.js";import"./ApplicationLogo-G5_lZz_V.js";import"./class-names-zUl3OLOi.js";import"./use-event-listener-bLg--NrZ.js";import"./lang-F_IncnmU.js";import"./useWindowScroll--2fQma_q.js";import"./util-MOdpI_j3.js";import"./dayjs.min-jMDgXcQu.js";import"./useMedia-HV9XGjUc.js";import"./index-e7VkmC_-.js";/* empty css                      */import"./index-sAVe241O.js";import"./trash-ZmmQMKWp.js";import"./transition-G-3VdV3I.js";import"./dialog-4x4KwS2E.js";import"./format-E-7T7_iI.js";import"./table-Ef1d0Ui7.js";import"./createSuper-Fmok1Pim.js";import"./defineProperty-9_qlZ_aL.js";import"./objectWithoutPropertiesLoose-0VpOByGv.js";import"./react-number-format.es-ILG5yc8J.js";import"./utils-kpKCX6Tx.js";const d={title:"Detail Order",breadcrumb:[{href:r.eCommerce.orders,name:"Orders"},{name:"Detail"}]};function de({order:t}){const{data:s,setData:m,patch:p,processing:u}=g({status:t.status??"",resi:t.resi??"",reason_cancelled:t.reason_cancelled??""}),[n,a]=v.useState(!1),x=()=>{a(!1)},i=o=>{const{name:j,value:b}=o.target;m({...s,[j]:b})},h=()=>{c.delete(r.eCommerce.orderDetails(t.id),{onSuccess:()=>c.visit(r.eCommerce.orders,{only:["orders"]})})},f=o=>{o.preventDefault(),p(r.eCommerce.orderDetails(t.id),{onSuccess:()=>{N("Order status has been updated.","success"),a(!1)}})};return e.jsxs(y,{title:`Detail #${t.order_id}`,children:[e.jsx(w,{title:d.title,breadcrumb:d.breadcrumb,children:e.jsxs("div",{className:"flex items-center gap-x-2",children:[e.jsx(l,{type:"button",onClick:()=>a(!0),children:"Update Status"}),t.status==="finish"?e.jsx("a",{href:`/order/${t.order_id}/invoice-download`,target:"_blank",rel:"noreferrer noopener",children:e.jsx(D,{})}):null,e.jsx(C.Button,{title:"Delete the order",description:`Are you sure you want to delete this #${t.order_id} order?`,onDelete:()=>h()})]})}),e.jsx(A,{order:t}),e.jsx(k,{isOpen:n,size:"DEFAULT",onClose:()=>a(!1),children:e.jsxs("div",{className:"m-auto px-5 pb-8 pt-5 @lg:pt-6 @2xl:px-7",children:[e.jsxs("div",{className:"mb-7 flex items-center justify-between",children:[e.jsx(P,{as:"h4",className:"font-semibold",children:"Change Status"}),e.jsx(_,{size:"sm",variant:"text",onClick:()=>a(!n),children:e.jsx(S,{className:"h-auto w-5"})})]}),e.jsxs("form",{onSubmit:f,children:[e.jsxs("div",{className:"mb-2",children:[e.jsx("label",{htmlFor:"status",className:"font-medium block text-gray-700 mb-2",children:"Status"}),e.jsxs("select",{name:"status",id:"status",className:"w-full border rounded-md border-gray-300",value:s.status,onChange:i,children:[e.jsx("option",{value:"payment",children:"Payment Pending"}),e.jsx("option",{value:"payment_success",children:"Payment Success"}),e.jsx("option",{value:"packaging",children:"Packaging"}),e.jsx("option",{value:"shipped",children:"Shipped"}),e.jsx("option",{value:"finish",children:"Completed"}),e.jsx("option",{value:"refund",children:"Refunded"}),e.jsx("option",{value:"canceled",children:"Cancelled"})]})]}),s.status==="shipped"&&e.jsx("div",{className:"mb-2",children:e.jsx(E,{label:"Resi",name:"resi",placeholder:"Enter a resi",value:s.resi,onChange:i,required:!0})}),s.status==="canceled"&&e.jsx("div",{className:"mb-2",children:e.jsx(O,{label:"Reason",name:"reason_cancelled",placeholder:"Enter a reason",value:s.reason_cancelled,onChange:i,required:!0})}),e.jsxs("div",{className:"sticky mt-4 bottom-0 z-40 flex items-center justify-end gap-3 bg-gray-0/10 backdrop-blur @lg:gap-4 @xl:grid @xl:auto-cols-max @xl:grid-flow-col",children:[e.jsx(l,{variant:"outline",className:"w-full @xl:w-auto",onClick:()=>x(),children:"Cancel"}),e.jsx(l,{type:"submit",isLoading:u,className:"w-full @xl:w-auto dark:bg-gray-100 dark:text-white dark:active:bg-gray-100",children:"Save"})]})]})]})})]})}export{de as default};
