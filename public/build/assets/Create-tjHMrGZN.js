import{r as g,W as I,j as n,d as R,y as V}from"./app-h2xn1fCp.js";import{A as L}from"./App-i7psYChY.js";import{V as N}from"./index-mebDoU9q.js";import{r as p}from"./drawer-uJSHbFqk.js";import{P as T}from"./page-header-DSjIVel5.js";import{n as f}from"./notification-XlaDvwWM.js";import W from"./edit-product-form-uf4DEs9d.js";import"./ApplicationLogo-OQ1O3wwz.js";import"./index.esm-ap6YTysa.js";import"./class-names-zUl3OLOi.js";import"./use-event-listener-xr_5DWQw.js";import"./lang-pQN9m2OT.js";import"./useWindowScroll-r9zRSJ0y.js";import"./util-MOdpI_j3.js";import"./dayjs.min-1MZ15xyC.js";import"./useMedia-57jYVyay.js";import"./index-LySXc-sb.js";/* empty css                      */import"./index-QfiPtcGz.js";import"./transition-D8WsS2vu.js";import"./dialog-z9FS3Sxn.js";import"./index-99ssCGLu.js";import"./index-Ls6Wn6hM.js";import"./product-summary-jsNRTpAA.js";import"./InputError-GmroXr0c.js";import"./form-group-IZR7p_E_.js";import"./listbox-vlVUx928.js";import"./product-media-xuoj0Hpe.js";import"./FileUpload-G5pEGrZD.js";import"./product-image-list-JfuRqT9p.js";import"./utils-kpKCX6Tx.js";import"./objectWithoutPropertiesLoose-0VpOByGv.js";import"./defineProperty-9_qlZ_aL.js";import"./tiny-invariant-Garq8XeN.js";import"./pricing-inventory-2XoiOIXM.js";import"./react-number-format.es-seYcNh7R.js";import"./form-footer-WrRD4Xmd.js";const h={title:"Add Product",breadcrumb:[{href:"#",name:"Home"},{href:p.eCommerce.products,name:"Products"},{name:"Create"}]};function we({product:C,categories:S}){const[d,l]=g.useState([]),{data:r,setData:s,errors:P,reset:x,processing:b,post:y,clearErrors:j}=I({name:"",description:"",categories:[],price:0,discount:0,discount_percent:0,weight:0,images:[],sizes:[]}),[w,E]=g.useState(!1),F=e=>{const{name:i,value:t}=e.target;if(i==="discount"){const o=parseFloat(r.price.toString().replace(/\,/g,"")),c=t.toString().replace(/\,/g,"")/o*100;s({...r,discount:t,discount_percent:c})}else if(i==="discount_percent"){const c=parseFloat(r.price.toString().replace(/\,/g,""))*(t/100);s({...r,discount:c,discount_percent:t})}else s({...r,[i]:t})},v=e=>{d.some(t=>t.id===e.id)?k(e.id):l(t=>{const o=t.concat(e);return s({...r,categories:o}),o})},z=e=>{s({...r,description:e})},A=e=>{s({...r,images:e})},_=(e,i)=>{const{name:t,value:o}=e.target;s(c=>{const a=[...c.sizes],u=a.findIndex(m=>m.name===i);u!==-1?a[u][t]=o:a.push({name:i,stock:o});const H=a.filter(m=>m.stock!==null&&m.stock!=="");return{...c,sizes:H}})},k=e=>{l(i=>{const t=i.filter(o=>o.id!==e);return s({...r,categories:t}),t})},D=e=>{e.preventDefault(),y(p.eCommerce.products,{preserveScroll:!0,onSuccess:()=>{f("Product has been created.","success"),x(),j(),E(!0),V.visit(p.eCommerce.products,{only:["products"]})},onError:()=>f("Something went wrong","error")})};return n.jsxs(L,{title:"Add Product",children:[n.jsx(T,{title:h.title,breadcrumb:h.breadcrumb,children:n.jsx(R,{href:p.eCommerce.categories,className:"mt-4 w-full @lg:mt-0 @lg:w-auto",children:n.jsx(N,{tag:"span",className:"w-full @lg:w-auto",variant:"outline",children:"Cancel"})})}),n.jsx(W,{handleSubmit:D,data:r,errors:P,isLoading:b,handleChange:F,handleSelect:v,handleDescription:z,handleSize:_,isClearFiles:w,product:C,categories:S,selectedCategory:d,handleImages:A,buttonTitle:"Create Product"})]})}export{we as default};
